---

# Moon Pal · 用户前端设计文档（MVP）

**适用范围**：Web 用户前端（非小程序）
**技术栈**：Next.js App Router
**目标**：跑通“从进入页面到开始陪伴播放”的完整最小闭环

---

## 0. 前端设计总原则（最高优先级）

> **这是一个状态机驱动的页面，而不是导航型应用**

Agent 在任何实现中，必须遵守以下铁律：

1. 页面数量 ≤ 3
2. 页面之间不可自由跳转
3. 一旦进入「陪伴态」，前端不再提供任何主动交互
4. 所有 UI 设计目标只有一个：**尽快降低清醒度**

---

## 1. 页面结构总览（MVP）

```
/
└── start        启动页（自动进入）
    ↓
└── energy       能量圆盘页（唯一主动选择）
    ↓
└── ritual       启动仪式页（长按）
    ↓
└── presence     陪伴播放页（无交互）
```

> ⚠️ 不允许返回
> ⚠️ 不允许菜单
> ⚠️ 不允许中途跳页

---

## 2. 全局 UI 规范（必须）

### 2.1 亮度与色彩

- 背景：深色（#050505 ～ #0A0A0A）
- 主色：低饱和暖色（不可纯白）
- 禁止使用高对比色
- 禁止闪烁、跳动、快速动画

### 2.2 字体与文本

- 字体大小偏大
- 行距宽
- 所有文案 **≤ 12 字**
- 不出现完整句号（避免“读信息感”）

---

## 3. 页面详解

---

### 3.1 启动页 `/start`

#### 页面目的

> **让用户什么都不做，自动进入流程**

#### 行为规则

- 页面加载后 **2 秒自动跳转**
- 无按钮
- 无文案或仅有极简文案（如“准备中”）

#### 允许的视觉元素

- 缓慢呼吸感渐变
- 微弱光点（不可移动）

---

### 3.2 能量圆盘页 `/energy`

#### 页面目的

> **让用户用“感觉”而不是“理解”完成一次选择**

#### 核心交互

- 一个圆盘（唯一可操作元素）
- 手指拖动位置 → 得到一个归一化数值 `0.0 ~ 1.0`
- **不显示数值**
- **不显示标签**
- **不显示解释**

#### 数据规则

```ts
energyValue: number; // 0.0 ~ 1.0
```

- 前端只负责计算
- 不做任何语义映射
- 提交即离开页面

#### 行为限制

- 无确认按钮
- 停留 > 3 秒自动进入下一页（使用当前值）

---

### 3.3 启动仪式页 `/ritual`

#### 页面目的

> **完成一次“不可逆”的心理切换**

#### 核心交互（唯一）

- 长按屏幕 2 秒
- 长按中有柔和反馈（光圈扩散）
- 中途松手 → 重置

#### 不允许的行为

- 点击
- 滑动
- 二次确认

#### 成功反馈

- 屏幕逐渐变暗
- 自动进入下一页

---

### 3.4 陪伴播放页 `/presence`

#### 页面目的

> **进入“被陪伴态”，不再打扰**

#### 页面行为

- 页面加载即开始播放音频
- 音频 URL 来自后端
- **不显示进度条**
- **不显示播放/暂停**
- **不显示任何按钮**

#### 唯一允许的交互

- 系统级退出（关闭页面 / 浏览器）

#### UI 状态

- 极暗背景
- 可选：极缓慢的亮度呼吸
- 无文字，或极小存在感文本（如“在这里”）

---

## 4. 前端状态机（Agent 必须按此实现）

```ts
type AppState = "INIT" | "ENERGY_SELECT" | "RITUAL" | "PRESENCE";
```

### 状态切换规则

```
INIT → ENERGY_SELECT → RITUAL → PRESENCE
```

- 不允许反向
- 不允许跳跃
- 刷新页面 = 回到 INIT

---

## 5. 与后端的唯一交互点

### 5.1 获取音频

在进入 `/presence` 前：

```ts
GET /api/audio?arousal=low|mid|high
```

- 返回：

```ts
{
  audioUrl: string;
}
```

### 5.2 前端职责边界

- 不判断会员
- 不处理个性化
- 不处理失败逻辑（直接使用返回音频）

---

## 6. 错误与兜底（前端极简）

### 网络失败

- 不显示错误文案
- 使用本地占位音频（如白噪或静音）

### 音频加载失败

- 自动重试一次
- 失败后静默（不提示）

---

## 7. 明确禁止事项（Agent 若想实现需立即停下）

❌ 登录 / 注册
❌ 设置页
❌ 说明页 / 教程
❌ 数据统计
❌ AB 测试
❌ 任何“玩”的感觉

---

## 8. MVP 验收清单（Agent 自检）

- [ ] 全流程不超过 15 秒进入播放
- [ ] 页面数 ≤ 4
- [ ] 所有文本 ≤ 12 字
- [ ] 没有一个按钮是“可犹豫的”
- [ ] 音频一定会播放

---

## 9. 给 Agent 的最终说明

> **如果你在实现时觉得“是不是太简单了”，
> 那说明你做对了。**
