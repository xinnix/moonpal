# Moon Pal Â· ç®¡ç†ç«¯å‰ç«¯è®¾è®¡æ–‡æ¡£ï¼ˆMVPï¼‰

**é€‚ç”¨èŒƒå›´**ï¼šWeb ç®¡ç†ç«¯ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
**æŠ€æœ¯æ ˆ**ï¼šNext.js App Router
**ç›®æ ‡**ï¼š

- æå‰å‡†å¤‡é™ªä¼´æ‰€éœ€çš„**ç¡®å®šæ€§èµ„æº**
- ç›‘æŽ§ç³»ç»Ÿæ˜¯å¦â€œæ­£å¸¸åœ¨åœºâ€
- **ä¸åšå†…å®¹åˆ›ä½œï¼Œä¸åšç²¾ç»†è¿è¥**

---

## 0. ç®¡ç†ç«¯è®¾è®¡æ€»åŽŸåˆ™ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

> **ç®¡ç†ç«¯çš„èŒè´£ä¸æ˜¯â€œç®¡ç†å­©å­â€ï¼Œè€Œæ˜¯â€œä¿è¯ç³»ç»Ÿä¸ä¼šå¤±çº¦â€**

Agent åœ¨å®žçŽ°ç®¡ç†ç«¯æ—¶ï¼Œå¿…é¡»éµå®ˆï¼š

1. æ‰€æœ‰æ“ä½œéƒ½æ˜¯**ä½Žé¢‘**çš„
2. æ‰€æœ‰é…ç½®éƒ½åº”æœ‰**é»˜è®¤å€¼**
3. ç®¡ç†ç«¯ä»»ä½•é”™è¯¯ **ä¸å½±å“ç”¨æˆ·ç«¯é™ªä¼´**
4. ç®¡ç†ç«¯ â‰  CMSï¼Œä¸æ”¯æŒè‡ªç”±å‘æŒ¥å†…å®¹åˆ›ä½œ

---

## 1. ç®¡ç†ç«¯çš„è§’è‰²å®šä½

### 1.1 ç®¡ç†ç«¯è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

- é€šç”¨é™ªä¼´æ–‡æœ¬æ˜¯å¦å·²å‡†å¤‡å¥½ï¼Ÿ
- å„æ¸…é†’åº¦åˆ†æ¡¶æ˜¯å¦æœ‰å¯ç”¨éŸ³é¢‘ï¼Ÿ
- TTS æ˜¯å¦å·¥ä½œæ­£å¸¸ï¼Ÿ
- ä¸ªæ€§åŒ–ç”Ÿæˆæ˜¯å¦â€œæ‚„æ‚„å®Œæˆâ€ï¼Ÿ

### 1.2 ç®¡ç†ç«¯æ˜Žç¡®ä¸è§£å†³çš„é—®é¢˜

âŒ å†…å®¹å†™å¾—å¥½ä¸å¥½
âŒ å­©å­å–œä¸å–œæ¬¢
âŒ æƒ…ç»ªæ˜¯å¦è¢«æ”¹å–„
âŒ è½¬åŒ–çŽ‡ / æ´»è·ƒåº¦ / ç•™å­˜

---

## 2. é¡µé¢ç»“æž„æ€»è§ˆï¼ˆMVPï¼‰

```
/admin
â””â”€â”€ dashboard        ç³»ç»ŸçŠ¶æ€æ€»è§ˆ
â””â”€â”€ narratives       é€šç”¨å™è¿°ç®¡ç†
â””â”€â”€ audio            éŸ³é¢‘ä¸Ž TTS çŠ¶æ€
â””â”€â”€ sessions         é™ªä¼´ä¼šè¯è®°å½•ï¼ˆåªè¯»ï¼‰
â””â”€â”€ settings         ç³»ç»Ÿçº§é…ç½®ï¼ˆæžå°‘ï¼‰
```

> âš ï¸ æ‰€æœ‰é¡µé¢åªå…è®¸ç®¡ç†å‘˜è®¿é—®
> âš ï¸ ä¸éœ€è¦å¤æ‚æƒé™ç³»ç»Ÿï¼ˆMVP ä»… 1 è§’è‰²ï¼‰

---

## 3. é¡µé¢è¯¦è§£

---

### 3.1 Dashboardï¼ˆç³»ç»ŸçŠ¶æ€é¡µï¼‰

#### é¡µé¢ç›®çš„

> **ä¸€çœ¼ç¡®è®¤ï¼šä»Šæ™šç³»ç»Ÿä¼šä¸ä¼šâ€œå¤±çº¦â€**

#### å¿…é¡»å±•ç¤ºçš„æ¨¡å—

##### 1ï¸âƒ£ ç³»ç»Ÿå¥åº·çŠ¶æ€

- LLM çŠ¶æ€ï¼šæ­£å¸¸ / é™çº§ / ä¸å¯ç”¨
- TTS çŠ¶æ€ï¼šæ­£å¸¸ / æŽ’é˜Ÿ / ä¸å¯ç”¨
- CDN çŠ¶æ€ï¼šæ­£å¸¸ / å»¶è¿Ÿ

ðŸ‘‰ åªæ˜¾ç¤ºçŠ¶æ€ï¼Œä¸æ˜¾ç¤ºæŠ€æœ¯ç»†èŠ‚

---

##### 2ï¸âƒ£ èµ„æºå‡†å¤‡æƒ…å†µ

| èµ„æº              | çŠ¶æ€    |
| ----------------- | ------- |
| åœ¨åœºå£°æ˜ŽéŸ³é¢‘      | âœ… / âŒ |
| æ¸…é†’åº¦é«˜-é€šç”¨éŸ³é¢‘ | âœ… / âŒ |
| æ¸…é†’åº¦ä¸­-é€šç”¨éŸ³é¢‘ | âœ… / âŒ |
| æ¸…é†’åº¦ä½Ž-é€šç”¨éŸ³é¢‘ | âœ… / âŒ |

---

##### 3ï¸âƒ£ ä»Šæ—¥é™ªä¼´æ¦‚è§ˆï¼ˆåªè¯»ï¼‰

- ä»Šæ—¥å¯åŠ¨æ¬¡æ•°
- æˆåŠŸæ’­æ”¾çŽ‡
- å…œåº•éŸ³é¢‘è§¦å‘æ¬¡æ•°

âš ï¸ ä¸å±•ç¤ºç”¨æˆ·ç”»åƒ
âš ï¸ ä¸å±•ç¤ºå­©å­ä¿¡æ¯

---

### 3.2 é€šç”¨å™è¿°ç®¡ç† `/narratives`

#### é¡µé¢ç›®çš„

> **ç®¡ç†â€œå¯è¢« TTS çš„ç¡®å®šæ€§æ–‡æœ¬â€ï¼Œä¸æ˜¯å†™æ•…äº‹**

---

#### ç»“æž„è®¾è®¡

```
æ¸…é†’åº¦åˆ†æ¡¶
â”œâ”€â”€ é«˜ï¼ˆ0.8â€“1.0ï¼‰
â”‚   â”œâ”€â”€ æ–‡æœ¬ 1
â”‚   â”œâ”€â”€ æ–‡æœ¬ 2
â”‚   â””â”€â”€ æ–‡æœ¬ 3
â”œâ”€â”€ ä¸­ï¼ˆ0.3â€“0.6ï¼‰
â””â”€â”€ ä½Žï¼ˆ0.0â€“0.3ï¼‰
```

---

#### å•æ¡é€šç”¨å™è¿°ç»“æž„

```ts
{
  id: string;
  arousal_bucket: "high" | "mid" | "low";
  text: string;
  status: "draft" | "active";
  audio_generated: boolean;
  version: number;
}
```

---

#### ç®¡ç†è§„åˆ™ï¼ˆéžå¸¸é‡è¦ï¼‰

- æ–‡æœ¬ **å¿…é¡»çŸ­**
- æ–‡æœ¬ **å¿…é¡»å¯ç‹¬ç«‹å­˜åœ¨**
- ä¸è¦æ±‚èµ·æ‰¿è½¬åˆ
- ä¸è¦æ±‚å®Œæ•´æ•…äº‹æ„Ÿ

---

#### æ“ä½œæƒé™

âœ… æ–°å¢žæ–‡æœ¬
âœ… å¯ç”¨ / åœç”¨
âœ… è§¦å‘ TTS ç”Ÿæˆ

âŒ å®žæ—¶è¯•å¬ï¼ˆé¿å…è¿è¥åŒ–ï¼‰
âŒ ç¼–è¾‘åŽ†å²å¯¹æ¯”

---

### 3.3 éŸ³é¢‘ä¸Ž TTS çŠ¶æ€ `/audio`

#### é¡µé¢ç›®çš„

> **ç¡®ä¿â€œå£°éŸ³ä¸€å®šå­˜åœ¨â€**

---

#### æ¨¡å—ä¸€ï¼šéŸ³é¢‘åº“å­˜

| æ¸…é†’åº¦ | éŸ³é¢‘æ•°é‡ | æœ€åŽç”Ÿæˆ   |
| ------ | -------- | ---------- |
| é«˜     | 5        | 2026-01-05 |
| ä¸­     | 6        | 2026-01-06 |
| ä½Ž     | 4        | 2026-01-04 |

---

#### æ¨¡å—äºŒï¼šTTS é˜Ÿåˆ—çŠ¶æ€

- å½“å‰é˜Ÿåˆ—é•¿åº¦
- æ­£åœ¨å¤„ç†ä»»åŠ¡æ•°
- æœ€è¿‘å¤±è´¥ä»»åŠ¡æ•°

---

#### ç®¡ç†åŠ¨ä½œï¼ˆä½Žé¢‘ï¼‰

- æ‰‹åŠ¨è§¦å‘ã€Œè¡¥å…¨é€šç”¨éŸ³é¢‘ã€
- æ¸…ç©ºå¤±è´¥ä»»åŠ¡ï¼ˆè°¨æ…Žï¼‰

---

### 3.4 é™ªä¼´ä¼šè¯è®°å½• `/sessions`

#### é¡µé¢ç›®çš„

> **éªŒè¯â€œé™ªä¼´æ˜¯å¦å‘ç”Ÿâ€ï¼Œè€Œä¸æ˜¯åˆ†æžè¡Œä¸º**

---

#### åˆ—è¡¨å­—æ®µï¼ˆåªè¯»ï¼‰

```ts
{
  session_id: string;
  created_at: datetime;
  arousal_bucket: "high" | "mid" | "low";
  audio_type: "general" | "personalized" | "fallback";
  success: boolean;
}
```

---

#### æ˜Žç¡®é™åˆ¶

âŒ ä¸å±•ç¤ºç”¨æˆ· ID
âŒ ä¸å±•ç¤ºå­©å­ç‰¹å¾
âŒ ä¸æ”¯æŒå¯¼å‡º

---

### 3.5 ç³»ç»Ÿè®¾ç½® `/settings`

#### é¡µé¢ç›®çš„

> **æžå°‘ä¿®æ”¹ï¼Œé¿å…é¢‘ç¹å¹²é¢„ç³»ç»Ÿ**

---

#### å¯é…ç½®é¡¹ï¼ˆMVPï¼‰

- å½“å‰é€šç”¨å™è¿°ç‰ˆæœ¬å·
- TTS é»˜è®¤éŸ³è‰²ï¼ˆä¸‹æ‹‰ï¼‰
- æ˜¯å¦å…è®¸ä¸ªæ€§åŒ–ç”Ÿæˆï¼ˆå¼€ / å…³ï¼‰

---

#### å¼ºåˆ¶é™åˆ¶

- ä¿®æ”¹éœ€äºŒæ¬¡ç¡®è®¤
- ä¿®æ”¹åŽ **åªå½±å“æ–°ä¼šè¯**

---

## 4. ç®¡ç†ç«¯çŠ¶æ€åŽŸåˆ™

- æ‰€æœ‰æ“ä½œå‡ä¸º**åŒæ­¥ç¡®è®¤**
- ä¸å…è®¸â€œæ‰¹é‡å¤æ‚æ“ä½œâ€
- ä¸å…è®¸è¿è¥åž‹æç¤ºï¼ˆå¦‚â€œå»ºè®®ä½ è¿™æ ·åšâ€ï¼‰

---

## 5. ä¸ŽåŽç«¯çš„äº¤äº’æ–¹å¼

- æ‰€æœ‰æ“ä½œé€šè¿‡ Server Actions
- ä¸ç›´æŽ¥è°ƒç”¨ Supabase Client
- ç®¡ç†ç«¯å¤±è´¥ â‰  ç”¨æˆ·ç«¯å¤±è´¥

---

## 6. æ˜Žç¡®ç¦æ­¢äº‹é¡¹ï¼ˆAgent è‹¥æƒ³å®žçŽ°éœ€ç«‹å³åœä¸‹ï¼‰

âŒ ç”¨æˆ·ç”»åƒåˆ†æž
âŒ æƒ…ç»ªç»Ÿè®¡
âŒ A/B æµ‹è¯•é¢æ¿
âŒ æŽ¨èç³»ç»Ÿ
âŒ å†…å®¹è¯„åˆ†

---

## 7. MVP ç®¡ç†ç«¯éªŒæ”¶æ¸…å•

- [ ] èƒ½ç¡®è®¤ç³»ç»Ÿä»Šæ™šå¯ç”¨
- [ ] èƒ½è¡¥å…¨é€šç”¨éŸ³é¢‘
- [ ] ä¸éœ€è¦æ¯æ—¥ç™»å½•æ“ä½œ
- [ ] æ²¡æœ‰â€œè¿è¥æ„Ÿâ€

---

## 8. ç»™ Agent çš„æœ€åŽæé†’

> **å¦‚æžœä½ è§‰å¾—è¿™ä¸ªç®¡ç†ç«¯â€œå¤ªå†·é™ã€å¤ªæ— èŠâ€ï¼Œ
> é‚£è¯´æ˜Žå®ƒæ˜¯å¯¹çš„ã€‚**
